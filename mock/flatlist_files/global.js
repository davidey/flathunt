gumtree.GumAutoComplete=function(C){var A=this,B;if(!(this instanceof (gumtree.GumAutoComplete))){return new gumtree.GumAutoComplete(C)}this.inputField=$(C.field);this.service=C.service;this.serviceSuffix=C.serviceSuffix;this.resultsKeyWrapper=C.resultsKeyWrapper;this.resultskey=C.resultsKey;this.divWrapperName=C.divWrapperName;this.divItemWrapperName=C.divItemWrapperName;this.buildQuery=C.buildQuery;this.onReceipt=C.onReceipt;this.isVisible=false;this.isReady=false;this.isLoadInitialised=false;this.prevTerm="";this.ajaxQueue=[];this.inputField.bind("keydown",function(E){var D=E.keyCode,G=13,F=9;if(D===G||D===F){if(A.isVisible){A.hideList();if(D===G){E.preventDefault()}}}});this.inputField.bind("keyup click",function(F){var E=A.getMembers();var D=A.getActiveMember();if(D.length===0){A.prevTerm=A.inputField.val()}if(F.keyCode===40){A.showList();if(D.length<1||D===E.eq(E.length-1)){D.trigger("blur");E.eq(0).trigger("focus");A.inputField.val(E.eq(0).text())}else{if(D.next().length>0){D.trigger("blur");D.next().trigger("focus");A.inputField.val(D.next().text())}else{D.trigger("blur");A.inputField.val(A.prevTerm)}}F.preventDefault()}else{if(F.keyCode===38){A.showList();if(D.length<1||D===E.eq(0)){D.trigger("blur");E.eq(E.length-1).trigger("focus");A.inputField.val(E.eq(E.length-1).text())}else{if(D.prev().length>0){D.trigger("blur");D.prev().trigger("focus");A.inputField.val(D.prev().text())}else{D.trigger("blur");A.inputField.val(A.prevTerm)}}F.preventDefault()}else{if(F.keyCode===13){}else{if(F.keyCode===9){if(A.getActiveMember().length===0){A.onChangeInput()}}else{A.onChangeInput()}}}}});this.searchTerm="";this.preWrap='<span class="'+C.highlightClass+'">';this.postWrap="</span>";this.autoCompleteWrapper=$("body").append('<div id="'+this.divWrapperName+'" style="position:absolute; display:none; z-index:10; "></div>');this.autoCompleteWrapper=$("#"+this.divWrapperName);this.positionMe();this.setListWidth();$(window).bind("resize.GumAutoComplete",function(){A.positionMe();A.setListWidth()});this.autoCompleteWrapper.bind("click",function(D){var E;if($(D.target).hasClass(C.highlightClass)){E=$(D.target).parent().text()}else{E=$(D.target).text()}A.inputField.val(E);A.inputField.focus();A.hideList()});$(document).bind("click.GumAutoComplete",function(E){var D=($(E.target).hasClass(A.divItemWrapperName)||E.target===A.inputField.get(0));if(!D){A.hideList()}})};gumtree.GumAutoComplete.prototype.focusOption=function(A){};gumtree.GumAutoComplete.prototype.positionMe=function(){var A=this.inputField.offset();A.top+=this.inputField.height();this.autoCompleteWrapper.css({top:Math.floor(A.top)+"px",left:Math.floor(A.left)+"px"})};gumtree.GumAutoComplete.prototype.setListWidth=function(){var A=this.inputField.innerWidth();this.autoCompleteWrapper.width(A)};gumtree.GumAutoComplete.prototype.getMembers=function(){return this.autoCompleteWrapper.find("."+this.divItemWrapperName)};gumtree.GumAutoComplete.prototype.getActiveMember=function(){return this.autoCompleteWrapper.find("."+this.divItemWrapperName+".hovered")};gumtree.GumAutoComplete.prototype.hideList=function(){this.isVisible=false;this.autoCompleteWrapper.hide()};gumtree.GumAutoComplete.prototype.showList=function(){this.isVisible=true;this.autoCompleteWrapper.show()};gumtree.GumAutoComplete.prototype.onChangeInput=function(){var A=this;this.isLoadInitialised=false;this.isReady=false;this.searchTerm=A.inputField.val();if(this.searchTerm.length>0){if(A.searchTerm.length>0){if(A.ajaxQueue.length>1){A.ajaxQueue.length=1}A.ajaxQueue.push(A.prepareDataRequest());if(!this.jsonRequest){A.processQueue()}}}else{this.hideList()}};gumtree.GumAutoComplete.prototype.prepareDataRequest=function(){var B=this,A;this.isLoadInitialised=true;A={url:this.doBuildQuery(),dataType:"json",timeout:1000,complete:function(){B.processQueue()},success:function(C){B.doOnReceipt(C)}};return A};gumtree.GumAutoComplete.prototype.processQueue=function(){var A=this;if(this.ajaxQueue.length>0){this.jsonRequest=function(){$.ajax(A.ajaxQueue.shift())}()}else{delete this.jsonRequest}};gumtree.GumAutoComplete.prototype.doBuildQuery=function(){var A=this.buildQuery.apply(this,[this.searchTerm]);return A};gumtree.GumAutoComplete.prototype.doOnReceipt=function(H){var I,E,A,M="",D,C,F,B,J,G,L,K=this.searchTerm;if(K.length>0&&H[this.resultsKeyWrapper]){this.showList();$("#"+this.divWrapperName).empty();for(I=0,E=H[this.resultsKeyWrapper].length;I<E;I++){J=new RegExp(this.searchTerm,"ig"),A=H[this.resultsKeyWrapper][I][this.resultskey];M=A;G="";L="";F=0;B=0;while(C=J.exec(A)){G=M.substring(F);L=M.substring(0,F);G=G.split("");G.splice(((C.index+this.searchTerm.length)-B),0,this.postWrap);G.splice((C.index-B),0,this.preWrap);M=L+G.join("");F+=this.preWrap.length+this.postWrap.length+this.searchTerm.length;B=B+this.searchTerm.length}D=$('<div class="'+this.divItemWrapperName+'">'+M+"</div>");D.bind("focus mouseover",function(){$(this).siblings().trigger("blur");$(this).addClass("hovered")});D.bind("blur mouseout",function(){$(this).removeClass("hovered")});$("#"+this.divWrapperName).append(D)}this.isReady=true}else{this.hideList()}return true};gumtree.GumMenuDropdown=function(C){if(!(this instanceof (gumtree.GumMenuDropdown))){return new gumtree.GumMenuDropdown(C)}var A=this,B;this.el=$(C.el);this.padXPos=C.padXPos||0;this.elSelector=C.el;this.autoCloseDelay=C.autoCloseDelay||false;this.positionChildrenInCenter=C.positionChildrenInCenter||false;this.submenuTriggers=this.el.find(".js_flyout-menu");this.submenus=this.submenuTriggers.next(".your-gumtree-secondary-dropdown");this.el.click(function(D){D.stopPropagation()});this.el.bind("mouseenter",function(){$(this).addClass("active");if(B){clearTimeout(B)}$(document).one("click.GumMenuDropdown",function(E){var D=$(E.target).hasClass(A.elSelector);if(!D){A.closeAllDropdowns()}});if(A.autoCloseDelay){A.el.one("mouseleave",function(D){var F=false,E=$(this).find("input");E.each(function(){if($(this).is(":focus")){F=true}});if(!F&&!$(D.target).hasClass(A.elSelector)){B=setTimeout(function(){A.closeAllDropdowns()},A.autoCloseDelay)}})}});this.el.find(">a").click(function(D){if(A.el.hasClass("active")){A.closeAllDropdowns()}else{A.el.trigger("mouseenter")}D.preventDefault()});if(C.convertHoversToClicks){this.convertHoversToClicks()}};gumtree.GumMenuDropdown.prototype.closeAllDropdowns=function(){this.hideAll();this.el.removeClass("active");this.el.trigger("mouseleave")};gumtree.GumMenuDropdown.prototype.convertHoversToClicks=function(){var A=this,B=function(D,C){D.css({"right":"auto","left":"50%","top":C.height()+"px","marginLeft":(-(D.outerWidth()/2)+A.padXPos)+"px"})};this.submenuTriggers.bind("click",function(){var C=$(this),D=C.next(".your-gumtree-secondary-dropdown");if(this.initialised===undefined){this.initialised=false}D.toggleClass("js-show");if(D.hasClass("js-show")){A.submenus.not(D).removeClass("js-show");if(A.positionChildrenInCenter&&!this.initialised){B(D,C);this.initialised=true}}return false})};gumtree.GumMenuDropdown.prototype.hideAll=function(){this.submenus.removeClass("js-show")};gumtree.GumAdManager=function(B){var A=this;if(!(this instanceof (gumtree.GumAdManager))){return new gumtree.GumAdManager(B)}this.statusSelector=$(B.statusSelector);this.parentStatuses=B.parentStatuses;this.fragmentService=B.fragmentService;this.cookieName=B.cookieName;this.cookieSplitDelimiter=B.cookieSplitDelimiter||B.cookieJoinDelimiter;this.cookieJoinDelimiter=B.cookieJoinDelimiter;this.cookiePrefix=B.cookiePrefix||"";this.totalCountSelector=$(B.totalCountSelector);this.adSelectorPrefix=B.adSelectorPrefix;this.adRemoveSelector=B.adRemoveSelector||null;this.adRemoveAllSelector=B.adRemoveAllSelector||null;this.adSaveSelector=B.adSaveSelector;this.onChangeDetect=B.onChangeDetect||function(){};this.onDeleteOne=B.onDeleteOne||function(C){C()};this.ajaxRequest=null;this.setup();this.runOnDeleteOne=function(C){C.displaySlots.each(function(){var D=function(){A.onChangeDetect.apply(A)};A.onDeleteOne.apply($(this),[D])})};this.runOnDeleteAll=function(){gumtree.utils.eraseCookie(A.cookieName);A.onChangeDetect.apply(A);this.afterUpdate()}};gumtree.GumAdManager.prototype.setup=function(){var D,A,C,B=this;this.adRegistry=[];this.adIds=this.getAdsArray();for(D=0,A=this.adIds.length;D<A;D++){C=this.adIds[D];if(C){this.createAd(C)}}if(this.adRemoveSelector){$(this.adRemoveSelector).unbind("click.GumAdManager").bind("click.GumAdManager",function(G){G.preventDefault();var F=B.getAd($(G.target).data("ad-id")),E=$(G.target).data("on-trigger-text");if(F){B.deleteAd(F);if(E){$(G.target).text(E)}}});$(this.adRemoveSelector).each(function(){var E=$(this).data("ad-id"),F=B.getAd(E),G=$(this).data("on-init-text");if(!F){$(this).addClass("disabled")}else{$(this).removeClass("disabled")}if(G){$(this).text(G)}})}if(this.adSaveSelector){$(this.adSaveSelector).unbind("click.GumAdManager").bind("click.GumAdManager",function(H){var E=$(H.target).data("ad-id"),G=$(H.target).data("on-trigger-text"),F=B.getAd(E);if(!F&&E){B.saveAd(E);if(G){$(H.target).text(G)}}H.preventDefault()});$(this.adSaveSelector).each(function(){var E=$(this).data("ad-id"),F=B.getAd(E),G=$(this).data("on-init-text");if(F){$(this).addClass("disabled")}else{$(this).removeClass("disabled")}if(G){$(this).text(G)}})}if(this.adRemoveAllSelector){$(this.adRemoveAllSelector).unbind("click.GumAdManager").bind("click.GumAdManager",function(E){B.runOnDeleteAll();E.preventDefault()})}if(B.parentStatuses){this.statusSelector.children().each(function(){var F=$(this).val();var E=new Array();if(jQuery.inArray(F,B.parentStatuses)!=-1){$(this).addClass("parent")}});this.statusSelector.attr("title",B.parentStatuses.join(","));$(document).trigger("setupGumAdManager")}this.afterUpdate()};gumtree.GumAdManager.prototype.createAd=function(A){var B=new gumtree.GumAdManager_Ad({manager:this,adId:A,adSelector:this.adSelectorPrefix+A.replace(this.cookiePrefix,"")});this.adRegistry.push(B)};gumtree.GumAdManager.prototype.getAd=function(B){var A=this.adRegistry.length,C;for(C=0;C<A;C++){if(this.adRegistry[C]["adId"]===B.toString()){return this.adRegistry[C]}}return false};gumtree.GumAdManager.prototype.getAdsArray=function(){var B=this.getAdsAsString(),A;if(B.length>0){A=B.split(this.cookieSplitDelimiter)}else{A=[]}return A};gumtree.GumAdManager.prototype.getAdsAsString=function(){var A=$.cookies.get(this.cookieName)||"";return A.toString()};gumtree.GumAdManager.prototype.afterUpdate=function(){var A=this;this.totalCountSelector.each(function(){$(this).text(A.getAdsArray().length)})};gumtree.GumAdManager.prototype.sanitizeCookie=function(A){var B=this.cookieJoinDelimiter.length;if(A.substring(A.length-B)===this.cookieJoinDelimiter){A=A.substring(0,A.length-B)}if(A.substring(0,B)===this.cookieJoinDelimiter){A=A.substring(B)}return A};gumtree.GumAdManager.prototype.deleteAd=function(B){var A=new RegExp(this.cookieJoinDelimiter+B.adId+this.cookieJoinDelimiter),C=(this.cookieJoinDelimiter+(this.getAdsArray().join(this.cookieJoinDelimiter))+this.cookieJoinDelimiter).replace(A,this.cookieJoinDelimiter);C=this.sanitizeCookie(C);$.cookies.set(this.cookieName,C,gumtree.state.cookieDefaults);if(C===""){gumtree.utils.eraseCookie(this.cookieName)}this.runOnDeleteOne(B);this.afterUpdate()};gumtree.GumAdManager.prototype.saveAd=function(B){var A=new RegExp(this.cookieJoinDelimiter+B+this.cookieJoinDelimiter),D=(this.cookieJoinDelimiter+(this.getAdsArray().join(this.cookieJoinDelimiter))+this.cookieJoinDelimiter).match(A);if(!D){var C=this.cookiePrefix+B+this.cookieJoinDelimiter+this.getAdsArray().join(this.cookieJoinDelimiter);C=this.sanitizeCookie(C);$.cookies.set(this.cookieName,C,gumtree.state.cookieDefaults);this.onChangeDetect.apply(this);this.afterUpdate()}};gumtree.GumAdManager_Ad=function(A){if(!(this instanceof (gumtree.GumAdManager_Ad))){return new gumtree.GumAdManager_Ad(A)}this.adId=A.adId;this.manager=A.manager;this.displaySlots=$(A.adSelector)};gumtree.GumFormInputWrapper=function(B){var A=this.input=$(B.inputField);if(!(this instanceof (gumtree.GumFormInputWrapper))){return new gumtree.GumFormInputWrapper(B)}if(A.get(0).parentNode.className!=="js_form-input form-input-wrapper"){A.wrap('<span class="js_form-input form-input-wrapper"></span>')}};gumtree.GumFormPlaceholder=function(B){var A=this;if(!(this instanceof (gumtree.GumFormPlaceholder))){return new gumtree.GumFormPlaceholder(B)}this.label=$(B.placeholder);if(!this.label.hasClass("pseudo-placeholder")){this.input=$("#"+this.label.closest("label").attr("for"));this.label.show();if((this.input.attr("value").length>0)||(this.input.is(":focus"))){this.label.hide()}this.label.addClass("pseudo-placeholder").appendTo(this.input.parent());this.label.bind({click:function(){A.input.trigger("focus")}});this.input.bind({focus:function(){A.label.hide()},blur:function(){if(A.input.attr("value")===""){A.label.show()}}})}};gumtree.GumTabManager=function(B){var A=this;if(!(this instanceof (gumtree.GumTabManager))){return new gumtree.GumTabManager(B)}A.onShow=B.onShow||function(){};A.panels=$(B.panels);A.panelClosing=B.panelClosing||false;A.triggerContainers=$(B.triggerContainers);A.animInSpeed=B.animInSpeed||0;A.animOutSpeed=B.animOutSpeed||0;A.selfClosing=B.selfClosing||false;A.isAnimating=false;A.tabs=[];A.triggerContainers.each(function(){var C=new gumtree.GumTabManager_TabElement({tabElement:$(this),tabManager:A});A.tabs.push(C)})};gumtree.GumTabManager_TabElement=function(B){var A=this;A.tabManager=B.tabManager;A.tabTriggerContainer=B.tabElement;if(A.tabTriggerContainer.get(0).nodeName.toLowerCase()==="a"){A.tabTrigger=A.tabTriggerContainer}else{A.tabTrigger=A.tabTriggerContainer.find("a")}A.tabTriggerSiblings=A.tabManager.triggerContainers.filter(function(){return this!=A.tabTriggerContainer});A.targetPane=$(A.tabTrigger.attr("href"));A.isActive=this.tabTriggerContainer.hasClass("active");if(!A.isActive){A.hideTab(true)}A.tabTrigger.bind("click",function(C){A.toggleTab(C)})};gumtree.GumTabManager_TabElement.prototype.toggleTab=function(C){var A=this,B=A.tabManager;if(!B.isAnimating){A.isActive=this.tabTriggerContainer.hasClass("active");if(!A.isActive){A.showTab(false)}else{if(B.selfClosing){A.hideTab(false)}}}A.tabTrigger.blur();C.preventDefault()};gumtree.GumTabManager_TabElement.prototype.hideTab=function(B){var A=this,C=A.tabManager,D=C.animOutSpeed;if(B){D=0}A.tabTriggerContainer.removeClass("active");C.isAnimating=true;A.targetPane.fadeOut(D,function(){if(C.panelClosing){C.panels.css("visibility","hidden")}C.isAnimating=false})};gumtree.GumTabManager_TabElement.prototype.showTab=function(B){var A=this,C=A.tabManager,D=C.animInSpeed;if(B){D=0}A.targetPane.siblings(A.targetPane.get(0).nodeName).hide();A.tabTriggerSiblings.removeClass("active");A.tabTriggerContainer.addClass("active");if(C.panelClosing){C.panels.css("visibility","visible")}C.isAnimating=true;A.targetPane.fadeIn(D,function(){C.isAnimating=false});C.onShow()};gumtree.GumFormInputClearControl=function(D){var L=this,G,H=gumtree.utils.getStyle,F=gumtree.utils.events.addEvent,C=L.inputField=D.inputField,K=$(C),J=H(C,"marginRight"),E=L.clearInput=document.createElement("div"),I=L.inputWrapper=C.parentNode,A=(I.parentNode.className==="fluid-width");if(!(L instanceof (gumtree.GumFormInputClearControl))){return new gumtree.GumFormInputClearControl(D)}E.className="clear-input-value";E.style.marginRight=J;I.appendChild(E);if(K.closest(".ie7").length==0){C.style.paddingRight="26px";if(!A){var B=parseInt(H(C,"width"),10);C.style.width=(B-26)+"px"}}G={doClear:function(M){L.doClear()},autoState:function(){L.autoState()},prepareClearInput:function(M){$(C).closest(".form-component").addClass("do-not-validate")}};F(L.clearInput,"mousedown",G.prepareClearInput);F(L.clearInput,"click",G.doClear);F(L.inputField,"keyup",G.autoState);F(L.inputField,"focus",G.autoState);L.autoState()};gumtree.GumFormInputClearControl.prototype.hide=function(){this.clearInput.style.display="none"};gumtree.GumFormInputClearControl.prototype.show=function(){this.clearInput.style.display="block"};gumtree.GumFormInputClearControl.prototype.autoState=function(){if(this.inputField.value.length<1){this.hide()}else{this.show()}};gumtree.GumFormInputClearControl.prototype.doClear=function(){var A=this.inputField,B=$(A).closest(".form-component");A.value="";A.focus();this.autoState();$(A).trigger("onClear");setTimeout(function(){B.removeClass("do-not-validate")},10)};gumtree.GumFormSelectComponent=function(B){var I=this,G,C;if(!(this instanceof (gumtree.GumFormSelectComponent))){return new gumtree.GumFormSelectComponent(B)}this._events={};this.delay=100;this.selectElement=B.selectElement;G=this.selectElement.parentNode;this.selectElement.style.display="none";this.idEl=this.selectElement.getAttribute("id");var D=this.selectElement;var J=D.options;this.selectContainer=document.createElement("span");this.selectContainer.className="pseudo-select";var H=document.createElement("div");H.className="pseudo-select-indicator";this.selectContainer.appendChild(H);this.selectReplacement=document.createElement("input");this.selectReplacement.type="text";this.selectContainer.appendChild(this.selectReplacement);G.insertBefore(this.selectContainer,this.selectElement);this.selectDropdown=document.createElement("ul");this.selectDropdown.className="pseudo-select-options";this.selectScrollUp=document.createElement("li");this.selectScrollUp.innerHTML="<span></span>";this.selectScrollUp.className="pseudo-select-up";this.selectDropdown.appendChild(this.selectScrollUp);C=this.selectElement.options;if(!C.selectedIndex){C[0].setAttribute("selected","selected")}this.selectOptions=[];this.selectOptionValueMapper=[];for(var E=0,A=C.length;E<A;E++){var F=new gumtree.GumFormSelectComponent_Option({"origOption":C[E],"manager":this});this.selectOptions.push(F);this.selectOptionValueMapper.push(F.optionText.toLowerCase());this.selectDropdown.appendChild(F.optionElement)}this.selectScrollDown=document.createElement("li");this.selectScrollDown.innerHTML="<span></span>";this.selectScrollDown.className="pseudo-select-down";this.selectDropdown.appendChild(this.selectScrollDown);document.body.appendChild(this.selectDropdown);this.selectContainer.appendChild(this.selectElement);this.styleSelect();this.setOptionsListWidth();this.firstOption=this.selectDropdown.childNodes[1];this.lastOption=this.selectDropdown.childNodes[this.selectDropdown.childNodes.length-2];this.typeTimeout=null;this.typedEntry="";this._events={focusToShowSelect:function(){I.focusToShowSelect()},showEvent:function(){I.showSelect()},hideEvent:function(){I.hideSelect()},setBounds:function(){I.setBounds()},scrollUp:function(){I.scrollUp()},removeScrollUp:function(){I.removeScrollUp()},scrollDown:function(){I.scrollDown()},removeScrollDown:function(){I.removeScrollDown()},keyPressEvent:function(K){I.keyPressEvent(K)}};gumtree.utils.events.addEvent(I.selectContainer,"click",I._events.showEvent);gumtree.utils.events.addEvent(I.selectReplacement,"focus",I._events.focusToShowSelect);gumtree.utils.events.addEvent(I.selectScrollDown,"mouseover",I._events.scrollDown);gumtree.utils.events.addEvent(I.selectScrollDown,"mouseout",I._events.removeScrollDown);gumtree.utils.events.addEvent(I.selectScrollUp,"mouseover",I._events.scrollUp);gumtree.utils.events.addEvent(I.selectScrollUp,"mouseout",I._events.removeScrollUp)};gumtree.GumFormSelectComponent.prototype.focusToShowSelect=function(){var A=this;gumtree.utils.events.triggerEvent(A.selectReplacement,"blur");gumtree.utils.events.triggerEvent(A.selectContainer,"click")};gumtree.GumFormSelectComponent.prototype.setBounds=function(){var B=this,C=(gumtree.utils.elementViewportPosition(B.lastOption).offsetAdjustedY>=0),A=gumtree.utils.isElementInViewport(B.selectReplacement),E,D;if(A){if(C){E=!gumtree.utils.isElementInViewport(B.firstOption);D=!gumtree.utils.isElementInViewport(B.lastOption);if(E){this.scrollUpIsVisible=true;this.selectScrollUp.style.display="block"}else{this.scrollUpIsVisible=false;this.selectScrollUp.style.display="none"}if(D){this.scrollDownIsVisible=true;this.selectScrollDown.style.display="block"}else{this.scrollDownIsVisible=false;this.selectScrollDown.style.display="none"}}else{this.scrollDownIsVisible=false;this.scrollUpIsVisible=false;this.selectScrollUp.style.display="none";this.selectScrollDown.style.display="none"}this.placeSelect()}else{this._events.hideEvent()}this.setOptionsListWidth()};gumtree.GumFormSelectComponent.prototype.placeSelect=function(B){var A=gumtree.utils.elementViewportPosition(this.selectContainer),C=this.selectElement.selectedIndex||0;this.selectDropdown.style.position="absolute";this.selectDropdown.style.top=((A.y+this.borderTopOffset)+-this.listTopOffset)+"px";this.selectDropdown.style.left=(A.x+this.borderLeftOffset+this.paddingLeftOffset)+"px";if(B===true){this.selectDropdown.style.marginTop=-(this.scrollIncrement*C)+"px"}this.selectDropdown.style.zIndex=999};gumtree.GumFormSelectComponent.prototype.getSelectDimensions=function(){var K=this,D=0,B=this.selectReplacement.offsetWidth,I=gumtree.utils.getStyle,G=parseInt(I(this.selectReplacement,"paddingTop")),E=parseInt(I(this.selectContainer,"paddingLeft")),A=parseInt(I(this.selectReplacement,"marginLeft")),F=parseInt(I(this.selectReplacement,"marginRight")),H=parseInt(I(this.selectReplacement,"borderLeftWidth")),C=parseInt(I(this.selectReplacement,"borderTopWidth")),J=parseInt(I(this.selectReplacement,"borderRightWidth"));if(!isNaN(H)){D-=H}if(!isNaN(J)){D-=J}if(!isNaN(A)){D+=-A}if(!isNaN(F)){D+=-F}return{innerWidthDeduct:D,selectWidth:B,selectPaddingTop:G,selectContainerPaddingLeft:E,marginLeft:A,marginRight:F,borderLeft:H,borderTop:C,borderRight:J}};gumtree.GumFormSelectComponent.prototype.styleSelect=function(){var A=this.getSelectDimensions();this.selectDropdown.style.visibility="hidden";this.selectDropdown.className="pseudo-select-options active";this.scrollIncrement=this.selectDropdown.childNodes[1].offsetHeight;this.selectDropdown.className="pseudo-select-options";this.selectDropdown.style.visibility="";this.listTopOffset=A.selectPaddingTop;this.borderLeftOffset=A.borderLeft;this.borderTopOffset=A.borderTop;this.paddingLeftOffset=A.selectContainerPaddingLeft};gumtree.GumFormSelectComponent.prototype.setOptionsListWidth=function(){var B=this.getSelectDimensions();var A;if(!isNaN(B.selectWidth)){A=B.selectWidth+B.innerWidthDeduct;this.selectDropdown.style.minWidth=A+"px"}this.selectScrollUp.style.width=(B.selectWidth+B.innerWidthDeduct)+"px";this.selectScrollDown.style.width=(B.selectWidth+B.innerWidthDeduct)+"px"};gumtree.GumFormSelectComponent.prototype.scrollDown=function(){var B=this,A=this.scrollIncrement,C=this.delay,D;if(this.scrollDownIsVisible){D=parseInt(gumtree.utils.getStyle(this.selectDropdown,"marginTop"))+-A;this.selectDropdown.style.marginTop=D+"px";this.setBounds();this.scrollTicker=setTimeout(function(){gumtree.GumFormSelectComponent.prototype.scrollDown.call(B)},C)}};gumtree.GumFormSelectComponent.prototype.removeScrollDown=function(){clearTimeout(this.scrollTicker);delete this.scrollTicker};gumtree.GumFormSelectComponent.prototype.scrollUp=function(D){var B=this,A=this.scrollIncrement,C=this.delay,E;if(this.scrollUpIsVisible){E=parseInt(gumtree.utils.getStyle(this.selectDropdown,"marginTop"))+A;this.selectDropdown.style.marginTop=E+"px";this.setBounds();this.scrollTicker=setTimeout(function(){gumtree.GumFormSelectComponent.prototype.scrollUp.call(B)},C)}};gumtree.GumFormSelectComponent.prototype.removeScrollUp=function(A){clearTimeout(this.scrollTicker);delete this.scrollTicker};gumtree.GumFormSelectComponent.prototype.setSelectedOption=function(A){this.removeSelectedOption();A.origOption.setAttribute("selected","selected");A.optionElement.className="selected";this.pseudoSelectedOption=A;this.selectReplacement.value=A.origOption.text;gumtree.utils.events.triggerEvent(this.selectElement,"blur")};gumtree.GumFormSelectComponent.prototype.removeSelectedOption=function(){var A=this.selectElement.options[this.selectElement.selectedIndex];if(A){A.removeAttribute("selected")}if(this.pseudoSelectedOption){this.pseudoSelectedOption.optionElement.className=""}};gumtree.GumFormSelectComponent.prototype.showSelect=function(){var A=this;A.placeSelect(true);A.selectDropdown.className="pseudo-select-options active";A.selectContainer.className="pseudo-select active";A.setBounds();if(this.pseudoSelectedOption&&this.pseudoSelectedOption.optionElement){gumtree.utils.events.triggerEvent(this.pseudoSelectedOption.optionElement,"mouseover")}gumtree.utils.events.removeEvent(A.selectContainer,"click",A._events.showEvent);gumtree.utils.events.removeEvent(A.selectReplacement,"focus",A._events.focusToShowSelect);setTimeout(function(){gumtree.utils.events.addEvent(window,"resize",A._events.setBounds);gumtree.utils.events.addEvent(window,"scroll",A._events.setBounds);gumtree.utils.events.addEvent(document,"click",A._events.hideEvent);gumtree.utils.events.addEvent(document,"keydown",A._events.keyPressEvent)},100)};gumtree.GumFormSelectComponent.prototype.hideSelect=function(){var A=this;this.selectDropdown.className="pseudo-select-options";this.selectContainer.className="pseudo-select";if(this.pseudoHoveredOption&&this.pseudoHoveredOption.optionElement){gumtree.utils.events.triggerEvent(this.pseudoHoveredOption.optionElement,"mouseout")}gumtree.utils.events.removeEvent(document,"click",A._events.hideEvent);gumtree.utils.events.removeEvent(window,"resize",A._events.setBounds);gumtree.utils.events.removeEvent(document,"keydown",A._events.keyPressEvent);gumtree.utils.events.removeEvent(window,"scroll",A._events.setBounds);setTimeout(function(){gumtree.utils.events.addEvent(A.selectReplacement,"focus",A._events.focusToShowSelect);gumtree.utils.events.addEvent(A.selectContainer,"click",A._events.showEvent)},100)};gumtree.GumFormSelectComponent.prototype.toggleOptionSelected=function(A){if(A.optionElement.className==="selected"){}else{this.setSelectedOption(A)}};gumtree.GumFormSelectComponent.prototype.keyPressEvent=function(G){var I=this,H=G.which||G.keyCode,A=String.fromCharCode(H),D;if(/[a-z0-9]/i.test(A)){this.typedEntry+=A.toLowerCase();if(this.typeTimeout){clearTimeout(this.typeTimeout)}for(var E=0,C=this.selectOptionValueMapper.length;E<C;E++){var B=this.selectOptionValueMapper[E];D=new RegExp("^"+this.typedEntry);if(D.test(B)){var F=this.selectOptions[E];I.focusTypedEntry(F);break}}this.typeTimeout=setTimeout(function(){I.typedEntry=""},1000)}else{if(H===13||H===9){gumtree.utils.events.triggerEvent(I.pseudoHoveredOption.optionElement,"click");if(H===13){if(G.target){G.target.blur()}else{if(G.srcElement){G.srcElement.blur()}}if(G.preventDefault){G.stopPropagation();G.preventDefault()}else{G.returnValue=false}}}else{if(H===38){gumtree.utils.events.triggerEvent(I.pseudoHoveredOption.optionElement.previousSibling,"mouseover");if(G.preventDefault){G.stopPropagation();G.preventDefault()}else{G.returnValue=false}}else{if(H===40){gumtree.utils.events.triggerEvent(I.pseudoHoveredOption.optionElement.nextSibling,"mouseover");if(G.preventDefault){G.stopPropagation();G.preventDefault()}else{G.returnValue=false}}}}}};gumtree.GumFormSelectComponent.prototype.focusTypedEntry=function(A){gumtree.utils.events.triggerEvent(A.optionElement,"mouseover")};gumtree.GumFormSelectComponent_Option=function(D){var B=this,C=D.manager,A=document.createElement("span"),E;this.origOption=D.origOption;E=this.origOption.getAttribute("data-depth");A.className="option-depth-"+E;this.optionElement=document.createElement("li");this.optionValue=this.origOption.value;this.optionText=this.origOption.innerHTML.toString();A.innerHTML=this.optionText;if(this.origOption.selected===true){C.setSelectedOption(this)}this.optionElement.appendChild(A);gumtree.utils.events.addEvent(this.optionElement,"click",function(){C.toggleOptionSelected(B)});gumtree.utils.events.addEvent(this.optionElement,"mouseout",function(){B.optionElement.className=B.optionElement.className.split(" hovered").join("")});gumtree.utils.events.addEvent(this.optionElement,"mouseover",function(){for(var G=0,F=C.selectOptions.length;G<F;G++){var H=C.selectOptions[G].optionElement;gumtree.utils.events.triggerEvent(H,"mouseout")}B.optionElement.className=B.optionElement.className.split(" hovered").join("")+" hovered";C.pseudoHoveredOption=B})};gumtree.init.global.nuggAd=function(){if(gumtree.state.nuggAd){var A=document.createElement("script");A.type="text/javascript";A.async=true;A.src=gumtree.state.nuggAd;var B=document.getElementsByTagName("script")[0];B.parentNode.insertBefore(A,B)}};gumtree.state.cookieDefaults={domain:gumtree.state.domain,path:"/",expiresAt:new Date(2020,1,12)};gumtree.init.global.yourGumtreeMenu=function(){return new gumtree.GumMenuDropdown({el:"#your-gumtree-dropdown-menu",convertHoversToClicks:true,positionChildrenInCenter:true,autoCloseDelay:1500,padXPos:-62})};gumtree.init.global.typeAhead=function(){var A=[];$(".search-extended-location").each(function(){A.push(new gumtree.GumAutoComplete({field:this,service:"/ajax/location/",serviceSuffix:".json",resultsKeyWrapper:"locationList",resultsKey:"name",divWrapperName:"js_location-type-ahead",divItemWrapperName:"js_location-type-ahead-item",highlightClass:"js_highlight",buildQuery:function(B){return this.service+B+this.serviceSuffix}}))})};gumtree.init.global.yourGumtreeFooter=function(){return new gumtree.GumTabManager({triggerContainers:"#your-gumtree-view-triggers>li",panels:"#your-gumtree-view-panel",animInSpeed:200,animOutSpeed:200})};gumtree.init.global.doFormPlaceholders=function(){if(!gumtree.state.formPlaceholders){gumtree.state.formPlaceholders=[]}$(".placeholder").each(function(){if(!gumtree.utils.inArray(this,gumtree.state.formPlaceholders)){gumtree.state.formPlaceholders.push(new gumtree.GumFormPlaceholder({placeholder:$(this)}))}});return gumtree.state.formPlaceholders};gumtree.init.global.replaceSelects=function(){if(!gumtree.state.replacedSelects){gumtree.state.replacedSelects=[]}var A=gumtree.utils.get("","select"),B=A.length,C;for(var D=0;D<B;D++){C=A[D];if(!gumtree.utils.inArray(C,gumtree.state.replacedSelects)){gumtree.state.replacedSelects.push(new gumtree.GumFormSelectComponent({"selectElement":C}))}}return gumtree.state.replacedSelects};gumtree.init.global.formInputClearControls=function(){if(!gumtree.state.formInputClearControls){gumtree.state.formInputClearControls=[]}var A=[];$("form input[type=text],form input[type=password]").each(function(){if(!gumtree.utils.inArray(this,gumtree.state.formInputClearControls)){if($.inArray(this,A)===-1){gumtree.state.formInputClearControls.push(new gumtree.GumFormInputClearControl({inputField:this}))}}})};gumtree.init.global.doFormInputWrappers=function(){if(!gumtree.state.doFormInputWrappers){gumtree.state.doFormInputWrappers=[]}var A=[];$("form input[type=text],form input[type=password]").each(function(){if(!gumtree.utils.inArray(this,gumtree.state.doFormInputWrappers)){if($.inArray(this,A)===-1){gumtree.state.doFormInputWrappers.push(new gumtree.GumFormInputWrapper({inputField:this}))}}})};gumtree.init.global.savedAds=function(){gumtree.state.savedAds=new gumtree.GumAdManager({statusSelector:"#mad-filter-_filter-ads-status",parentStatuses:new Array("ACTIVE_ADS","INACTIVE_ADS"),fragmentService:"/ajax/savedads.html",cookieName:"saved_ids",cookieSplitDelimiter:/[\s\+]/,cookieJoinDelimiter:" ",adSelectorPrefix:".js_saved-ads .js_ad-",totalCountSelector:".total-saved-ads",adSaveSelector:".js_save-ad",adRemoveSelector:".js_remove-saved-ad",adRemoveAllSelector:".clear-saved-ads",onChangeDetect:function(){if(this.ajaxRequest){this.ajaxRequest.abort()}var B=this,D=$("#your-gumtree-your-saved-ads section div"),A=$("#your-gumtree-saved"),C=new Date().getTime();this.ajaxRequest=$.ajax({type:"GET",url:B.fragmentService+"?r="+C,beforeSend:function(E){},success:function(G,E,H){var F=document.createElement("div");F.setAttribute("id","js_saved_ads_tmp");if(window.innerShiv){F.appendChild(innerShiv(G))}else{F.innerHTML=G}D.html($(F).find("#header-saved-ads").html());A.html($(F).find("#your-gumtree-saved").html());B.setup();delete B.ajaxRequest},dataType:"html"})},onDeleteOne:function(B){var A=this;this.callback=B;$(this).addClass("js_isDeleting");$(this).fadeOut("200",function(){$(this).remove();A.callback()})}});return gumtree.state.savedAds};gumtree.init.global.recentAds=function(){gumtree.state.recentAds=new gumtree.GumAdManager({fragmentService:"/ajax/recentlyviewedads.html",cookieName:"recent_ids",cookieSplitDelimiter:/[\s\+]/,cookieJoinDelimiter:" ",cookiePrefix:"1337:",adSelectorPrefix:".js_recent-ads .js_ad-",adRemoveAllSelector:".clear-recent-ads",onChangeDetect:function(){if(this.ajaxRequest){this.ajaxRequest.abort()}var A=this,C=$("#your-gumtree-recently-viewed"),B=new Date().getTime();this.ajaxRequest=$.ajax({url:"/ajax/recentlyviewedads.html?r="+B,success:function(E){var D=document.createElement("div");D.setAttribute("id","js_saved_ads_tmp");if(window.innerShiv){D.appendChild(innerShiv(E))}else{D.innerHTML=E}C.html($(D).find("#your-gumtree-recently-viewed").html());A.setup();delete A.ajaxRequest},dataType:"html"})}});return gumtree.state.recentAds};gumtree.init.global.seoFooter=function(){return new gumtree.GumTabManager({triggerContainers:"#seo-links .triggers li",panels:"#seo-panels",animInSpeed:200,animOutSpeed:200,selfClosing:true,panelClosing:true})};gumtree.init.global.iframeDomReady=function(){$('iframe[src=""]').each(function(){var A=$(this);if(!A.data("on-demand")){A.attr("src",A.data("src"))}})};gumtree.init.global.adsenseTrack=function(){$(".adsense_ad a").each(function(){$(this).click(function(){$("#mediaplex-iframe").attr("src",gumtree.state.mediaplexUrl)})})};gumtree.init.global.incrementViewCount=function(){if(gumtree.state.viewcountUpdateUrl){$.ajax(gumtree.state.viewcountUpdateUrl)}};gumtree.init.global.selectAlls=function(){$('.js_select-all-trigger input[type="checkbox"]').each(function(){var B=$(this),A=$("."+B.data("scope")+':not(.exclude)  input[type="checkbox"]');if(A.length===0){B.hide()}A.bind("change",function(){if(!$(this).attr("checked")){B.removeAttr("checked")}});B.bind("change",function(){var C=(B.attr("checked"));if(C){A.each(function(){if($(this).attr("disabled")!=true){$(this).attr("checked",true);$(this).trigger("change")}})}else{A.each(function(){if($(this).attr("disabled")!=true){$(this).removeAttr("checked");$(this).trigger("change")}});A.removeAttr("checked")}})})};gumtree.init.global.errorMessageAnchorSubmit=function(){var A=[{"linkText":"continue","targetSubmit":"#login_submit-log-in"},{"linkText":"manually select your location","targetSubmit":"#location_manual_selection_mode"}],B=".form-component-error .error";$(A).each(function(E){var F=this,C=$(B+' a[href="#"]'),G=$(F.targetSubmit),D=G.length;if(D&&C.text()===F.linkText){C.unbind("click.errorMessageAnchorSubmit").bind("click.errorMessageAnchorSubmit",function(){G.trigger("click")})}})};gumtree.init.global._onDomReady=(function(){gumtree.init.global.doFormInputWrappers();gumtree.init.global.doFormPlaceholders();gumtree.init.global.formInputClearControls();gumtree.init.global.nuggAd();gumtree.init.global.incrementViewCount();gumtree.init.global.replaceSelects();gumtree.init.global.yourGumtreeMenu();gumtree.init.global.typeAhead();gumtree.init.global.iframeDomReady();gumtree.init.global.selectAlls();gumtree.init.global.errorMessageAnchorSubmit();gumtree.init.global.yourGumtreeFooter();gumtree.init.global.savedAds();gumtree.init.global.recentAds();gumtree.init.global.seoFooter();gumtree.init.global.adsenseTrack()});domReady(function(){gumtree.init.global._onDomReady()})